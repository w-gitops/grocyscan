# 90.10 Deprecate and Remove NiceGUI

This document defines the task to remove all NiceGUI code and references from the codebase, completing the transition to Vue/Quasar as the sole frontend.

---

## Frontmatter

```yaml
phase: maintenance
name: Deprecate NiceGUI
description: Remove NiceGUI code, dependencies, and documentation references
test_command: pytest tests/ -v --tb=short && cd frontend && npm run build
browser_validation: false
estimated_criteria: 8
```

---

## Overview

NiceGUI was used as an interim UI during early development. The Vue/Quasar frontend at `:3335` now has full feature parity and is the target architecture. This task removes all NiceGUI artifacts to:

1. Reduce codebase complexity
2. Eliminate duplicate UI implementations
3. Remove unused dependencies
4. Update documentation to reflect Vue-only architecture

---

## Impact Assessment

### Code to Remove

```
app/ui/                          # 14 Python files (~3,500 lines)
├── __init__.py
├── app.py                       # NiceGUI app entry point
├── layout.py                    # Header/nav components
├── components/
│   ├── __init__.py
│   ├── date_picker.py
│   ├── product_search.py
│   ├── review_popup.py
│   └── scanner.py
└── pages/
    ├── __init__.py
    ├── jobs.py
    ├── locations.py
    ├── login.py
    ├── logs.py
    ├── products.py
    ├── scan.py
    └── settings.py
```

### Dependencies to Remove

- `nicegui>=1.4.0` from `requirements.txt`
- `nicegui` from `pyproject.toml` dependencies

### Files to Modify

| File | Change |
|------|--------|
| `app/main.py` | Remove NiceGUI app mounting, imports |
| `app/api/routes/me.py` | Remove any NiceGUI-specific session handling |
| `requirements.txt` | Remove `nicegui>=1.4.0` |
| `pyproject.toml` | Remove nicegui from dependencies |

### PRDs to Update

| Document | Change Needed |
|----------|---------------|
| `prd/80.13-ralph-phase-3-device-ui.md` | Remove Option A (NiceGUI), keep Option B only |
| `prd/30.10-technical-architecture.md` | Update frontend stack description |
| `prd/30.13-ui-specification.md` | Remove NiceGUI references |
| `prd/40.15-deployment.md` | Update if references NiceGUI port |
| `prd/50.10-testing-strategy.md` | Remove NiceGUI testing references |
| `prd/91.14-decision-log.md` | Add deprecation decision |
| `prd/feature-scanner-gun-mode.md` | Update to Vue implementation |
| `prd/feature-product-name-search.md` | Update to Vue implementation |
| `prd/README.md` | Update stack description |
| `.ralph/progress.md` | Mark NiceGUI as deprecated |
| `README.md` | Update project description |
| `CHANGELOG.md` | Document removal |

---

## Acceptance Criteria

### Code Removal

- [ ] **[1] [CRITICAL]** Delete `app/ui/` directory entirely
  - All 14 Python files removed
  - Test: `ls app/ui/` returns "No such file or directory"

- [ ] **[2] [CRITICAL]** Remove NiceGUI from `app/main.py`
  - Remove NiceGUI imports
  - Remove `ui.run()` or NiceGUI mounting code
  - Remove any NiceGUI-specific middleware
  - Test: `grep -r "nicegui" app/main.py` returns nothing

- [ ] **[3] [CRITICAL]** Remove NiceGUI from dependencies
  - Remove from `requirements.txt`
  - Remove from `pyproject.toml`
  - Test: `grep nicegui requirements.txt` returns nothing
  - Test: `pip install -r requirements.txt` succeeds without nicegui

- [ ] **[4] [CORE]** Clean up any remaining NiceGUI imports
  - Check `app/api/routes/me.py` for NiceGUI references
  - Remove any `from nicegui import` statements
  - Test: `grep -r "from nicegui" app/` returns nothing

### Documentation Updates

- [ ] **[5] [CRITICAL]** Update Phase 3 PRD
  - Remove Option A (NiceGUI validation path)
  - Make Option B (Vue/Quasar) the only path
  - Update `browser_url` to `:3335` only

- [ ] **[6] [CORE]** Update architecture PRDs
  - Update `prd/30.10-technical-architecture.md` frontend stack
  - Update `prd/30.13-ui-specification.md` to Vue only
  - Update `prd/40.15-deployment.md` if needed

- [ ] **[7] [CORE]** Update feature PRDs
  - Update `prd/feature-scanner-gun-mode.md` to Vue
  - Update `prd/feature-product-name-search.md` to Vue

- [ ] **[8] [FLEX]** Update project documentation
  - Update `README.md` stack description
  - Add entry to `CHANGELOG.md`
  - Add decision to `prd/91.14-decision-log.md`

---

## Test Command

```bash
# Verify no NiceGUI references in code
grep -r "nicegui" app/ && exit 1 || echo "No NiceGUI in app/"
grep -r "from nicegui" . --include="*.py" && exit 1 || echo "No NiceGUI imports"

# Verify dependencies work without NiceGUI
pip install -r requirements.txt

# Verify backend still works
pytest tests/ -v --tb=short

# Verify frontend builds
cd frontend && npm run build
```

---

## Dependencies

- Phase 3.5 should NOT be blocked by this
- Vue parity confirmed (ScanPage, ProductsPage, LocationsPage, SettingsPage, JobsPage, LogsPage all complete or covered by 3.5)

---

## Risk Assessment

| Risk | Mitigation |
|------|------------|
| Breaking production | Server currently serves Vue on :3335; NiceGUI on :3334 was interim only |
| Missing features | Vue parity verified; LocationsPage edit/delete covered by Phase 3.5 |
| Documentation drift | Update all PRDs in single pass |

---

## Post-Removal Verification

After removal, verify:

1. `python -c "import app.main"` succeeds
2. `pytest tests/` passes
3. Frontend at `:3335` works (Vue/Quasar)
4. No 404 errors on previously-NiceGUI routes (they should not exist)

---

## Decision Record

**DEC-052: Deprecate NiceGUI Frontend**

- **Date**: 2026-02-04
- **Status**: Approved
- **Context**: NiceGUI was used for rapid prototyping during Phase 3. Vue/Quasar frontend now has full feature parity.
- **Decision**: Remove NiceGUI code and dependencies; Vue/Quasar is the sole frontend.
- **Consequences**: 
  - Reduced codebase complexity (~3,500 lines removed)
  - Single frontend to maintain
  - Clearer architecture documentation

---

## Navigation

- **Previous:** [Phase 3.5: Inventory Parity](80.135-ralph-phase-3.5-inventory-parity.md)
- **Next:** [Phase 4: Labels & QR](80.14-ralph-phase-4-labels-qr.md)
- **Back to:** [Phases Overview](80.10-ralph-phases-overview.md)
