# 50.11 Project Standards

> **See Also:** [Standards of Development](10.10-standards-of-development.md) for the Ralph Wiggum development methodology and consolidated reference for AI agents.

## 50.11.1 Technology Standards

### Backend (Python/FastAPI)

| Tool | Purpose | Version |
|------|---------|---------|
| Python | Runtime | 3.11+ |
| FastAPI | Framework | Latest |
| SQLAlchemy | ORM | 2.0+ |
| Pydantic | Validation | v2 |
| Alembic | Migrations | Latest |
| pytest | Testing | Latest |
| ruff | Linting | Latest |
| black | Formatting | Latest |

### Frontend (Vue/Quasar)

| Tool | Purpose | Version |
|------|---------|---------|
| Node.js | Runtime | 20 LTS |
| Vue | Framework | 3.x |
| Quasar | UI Framework | 2.x |
| Pinia | State | Latest |
| TypeScript | Language | 5.x |
| Vite | Build | Latest |
| ESLint | Linting | Latest |
| Prettier | Formatting | Latest |

## 50.11.2 Semantic Versioning

### Format: MAJOR.MINOR.PATCH

| Component | When to Increment |
|-----------|-------------------|
| **MAJOR** | Breaking API changes |
| **MINOR** | New features, backwards compatible |
| **PATCH** | Bug fixes, backwards compatible |

### Pre-release Tags
- Alpha: `2.0.0-alpha.1`
- Beta: `2.0.0-beta.1`
- Release Candidate: `2.0.0-rc.1`

## 50.11.3 Commit Message Format

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

### Types

| Type | Usage |
|------|-------|
| `feat` | New feature |
| `fix` | Bug fix |
| `docs` | Documentation |
| `style` | Formatting |
| `refactor` | Code restructure |
| `test` | Tests |
| `chore` | Maintenance |
| `perf` | Performance |

### Scopes

| Scope | Area |
|-------|------|
| `api` | Backend API |
| `ui` | Frontend UI |
| `db` | Database |
| `auth` | Authentication |
| `qr` | QR tokens |
| `labels` | Label printing |
| `recipes` | Recipes/meals |
| `stock` | Inventory |

### Ralph Commits

When working under Ralph Wiggum methodology, use:

```
ralph: [N] description
```

Where N is the criterion number. Example:
```
ralph: [3] Implement JWT authentication
```

## 50.11.4 Code Style

### Python Style

```python
from typing import Optional
from uuid import UUID
from pydantic import BaseModel


class ProductCreate(BaseModel):
    """Schema for creating a product."""
    
    name: str
    barcode: Optional[str] = None
    category: Optional[str] = None


async def create_product(
    db: Session,
    data: ProductCreate,
    tenant_id: UUID,
) -> Product:
    """
    Create a new product.
    
    Args:
        db: Database session
        data: Product creation data
        tenant_id: Tenant UUID
    
    Returns:
        Created product
    
    Raises:
        DuplicateError: If barcode already exists
    """
    product = Product(
        tenant_id=tenant_id,
        name=data.name,
        barcode=data.barcode,
        category=data.category,
    )
    db.add(product)
    db.commit()
    return product
```

### TypeScript/Vue Style

```typescript
// stores/products.ts
import { defineStore } from 'pinia'
import type { Product } from '@/types'

export const useProductStore = defineStore('products', {
  state: () => ({
    items: [] as Product[],
    loading: false,
    error: null as string | null,
  }),

  getters: {
    lowStock: (state) => state.items.filter(p => p.stock < p.minStock),
  },

  actions: {
    async fetchProducts() {
      this.loading = true
      try {
        const response = await api.get('/api/v2/products')
        this.items = response.data
      } catch (e) {
        this.error = 'Failed to fetch products'
      } finally {
        this.loading = false
      }
    },
  },
})
```

```vue
<!-- components/ProductCard.vue -->
<template>
  <q-card class="product-card">
    <q-card-section>
      <div class="text-h6">{{ product.name }}</div>
      <div class="text-subtitle2">{{ product.category }}</div>
    </q-card-section>
    
    <q-card-section>
      <q-badge :color="stockColor">
        Stock: {{ product.stock }}
      </q-badge>
    </q-card-section>
    
    <q-card-actions>
      <q-btn flat @click="$emit('edit', product)">Edit</q-btn>
      <q-btn flat color="primary" @click="$emit('add-stock', product)">
        Add Stock
      </q-btn>
    </q-card-actions>
  </q-card>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import type { Product } from '@/types'

const props = defineProps<{
  product: Product
}>()

const stockColor = computed(() => {
  if (props.product.stock === 0) return 'negative'
  if (props.product.stock < props.product.minStock) return 'warning'
  return 'positive'
})
</script>
```

## 50.11.5 Logging Standards

### Log Format (JSON)

```json
{
  "timestamp": "2026-02-02T00:15:32.123456Z",
  "level": "INFO",
  "message": "Product added to stock",
  "logger": "homebot.services.stock",
  "trace_id": "abc123...",
  "span_id": "def456...",
  "request_id": "550e8400-e29b-41d4-a716-446655440000",
  "tenant_id": "tenant-uuid",
  "product_id": "product-uuid",
  "quantity": 1,
  "duration_ms": 45
}
```

### Log Levels

| Level | Usage |
|-------|-------|
| **DEBUG** | Detailed diagnostic information |
| **INFO** | Normal operations, business events |
| **WARNING** | Unexpected but recoverable situations |
| **ERROR** | Errors that prevented operation completion |
| **CRITICAL** | System-wide failures |

## 50.11.6 API Standards

### URL Conventions

```
GET    /api/v2/products           # List
POST   /api/v2/products           # Create
GET    /api/v2/products/{id}      # Read
PATCH  /api/v2/products/{id}      # Update
DELETE /api/v2/products/{id}      # Delete

POST   /api/v2/stock/add          # Action
POST   /api/v2/stock/consume      # Action
```

### Response Format

```json
{
  "data": { ... },
  "meta": {
    "page": 1,
    "per_page": 50,
    "total": 234
  }
}
```

### Error Format

```json
{
  "error": {
    "code": "PRODUCT_NOT_FOUND",
    "message": "Product with ID xyz not found",
    "details": {}
  }
}
```

## 50.11.7 Testing Standards

- Minimum **80%** code coverage
- All new features require unit tests
- Integration tests for API endpoints
- BrowserMCP validation for UI criteria
- Mock external services in tests

---

## Navigation

- **Previous:** [Testing Strategy](50.10-testing-strategy.md)
- **Next:** [Troubleshooting](50.12-troubleshooting.md)
- **Back to:** [README](README.md)
